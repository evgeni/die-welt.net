<html><body><p>Do you deliver your mail with <a href="http://www.courier-mta.org/maildrop/">maildrop</a>? If not, this post is only for your "amusement".

My mailserver runs Postfix as MTA and maildrop as MDA, a pretty common setup I'd say. And it happens that maildrop supports quota. It supports it so good, that I have no idea how to disable that support, but I also actually never cared, as my user database declares each user has 10GB quota for mails (courier's authtest says "<code>Quota: 10000000000S</code>", so does the configuration). And 10GB should be enough for everybody, right?

Well, so I thought until I noticed that my Icedove indicated a 99% full mailbox and shortly afterwards maildrop stopped delivering mails with "<code>maildir over quota</code>". Looking at the <code>maildirsize</code> file in my maildir, I noticed that the quota is set to <code>1410065408S</code>, a mere 1.4GB. Where does this number come from? The proficient reader will quickly see that <code>10000000000 mod 2^32 = 1410065408</code>, so this is actually an integer overflow happening somewhere in the code handling the maildirsize file (read: in maildrop). A short dig through the Debian BTS revealed a <a href="http://bugs.debian.org/185149">bug from 2003, saying exactly the same</a>. The bug also indicated, the issue is fixed since maildrop 2.5. A short cowbuilder run later, I had a <code>maildrop_2.5.5-2_i386.deb</code>, installed it and after the next mail delivery, my quota was at 10GB as it should.

TL;DR: If you run into strange "<code>maildir over quota</code>" errors with maildrop on Debian Squeeze, get a newer maildrop (or backport that single patch to Squeeze's maildrop).</p></body></html>